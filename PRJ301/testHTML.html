<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chọn địa chỉ Việt Nam</title>
</head>
<body>

<h3>Chọn địa chỉ</h3>

<!-- Dropdown chọn tỉnh -->
<label for="province">Tỉnh/Thành phố:</label>
<select id="province" onchange="loadDistricts()">
    <option value="">Chọn Tỉnh/Thành phố</option>
    <option value="hanoi">Hà Nội</option>
    <option value="danang">Đà Nẵng</option>
    <option value="hochiminh">Hồ Chí Minh</option>
</select>

<br><br>

<!-- Dropdown chọn huyện -->
<label for="district">Quận/Huyện:</label>
<select id="district" onchange="loadWards()" disabled>
    <option value="">Chọn Quận/Huyện</option>
</select>

<br><br>

<!-- Dropdown chọn xã -->
<label for="ward">Xã/Phường:</label>
<select id="ward" disabled>
    <option value="">Chọn Xã/Phường</option>
</select>

<script>
// Dữ liệu mẫu: Danh sách huyện theo tỉnh và xã theo huyện
const data = {
    hanoi: {
        districts: {
            ba_dinh: ['Phường Cống Vị', 'Phường Điện Biên', 'Phường Giảng Võ'],
            dong_da: ['Phường Cát Linh', 'Phường Hàng Bột', 'Phường Khâm Thiên']
        }
    },
    danang: {
        districts: {
            hai_chau: ['Phường Hải Châu 1', 'Phường Hải Châu 2', 'Phường Bình Thuận'],
            cam_le: ['Phường Hòa An', 'Phường Hòa Thọ Đông', 'Phường Khuê Trung']
        }
    },
    hochiminh: {
        districts: {
            quan_1: ['Phường Bến Nghé', 'Phường Bến Thành', 'Phường Nguyễn Thái Bình'],
            quan_3: ['Phường Võ Thị Sáu', 'Phường Phạm Ngọc Thạch', 'Phường Quận 3']
        }
    }
};

// Dữ liệu người dùng có sẵn từ server
const userData = {
    province: "hanoi",   // Hà Nội
    district: "dong_da", // Quận Đống Đa
    ward: "Phường Khâm Thiên"   // Xã Khâm Thiên
};

// Khi trang tải, gọi hàm để chọn sẵn tỉnh/huyện/xã dựa vào dữ liệu người dùng
document.addEventListener('DOMContentLoaded', function() {
    const provinceSelect = document.getElementById('province');
    const districtSelect = document.getElementById('district');
    const wardSelect = document.getElementById('ward');

    // Chọn tỉnh sẵn
    provinceSelect.value = userData.province;
    loadDistricts();

    // Sau khi huyện được tải, chọn sẵn huyện
    districtSelect.value = userData.district;
    loadWards();

    // Sau khi xã được tải, chọn sẵn xã
    wardSelect.value = userData.ward;
});

// Load danh sách huyện khi chọn tỉnh
function loadDistricts() {
    const province = document.getElementById('province').value;
    const districtSelect = document.getElementById('district');
    const wardSelect = document.getElementById('ward');

    // Reset dropdown huyện và xã
    districtSelect.innerHTML = '<option value="">Chọn Quận/Huyện</option>';
    wardSelect.innerHTML = '<option value="">Chọn Xã/Phường</option>';
    wardSelect.disabled = true;

    if (province) {
        const districts = data[province].districts;
        for (let district in districts) {
            districtSelect.innerHTML += `<option value="${district}">${district.replace(/_/g, ' ').toUpperCase()}</option>`;
        }
        districtSelect.disabled = false;
    } else {
        districtSelect.disabled = true;
        wardSelect.disabled = true;
    }
}

// Load danh sách xã khi chọn huyện
function loadWards() {
    const province = document.getElementById('province').value;
    const district = document.getElementById('district').value;
    const wardSelect = document.getElementById('ward');

    // Reset dropdown xã
    wardSelect.innerHTML = '<option value="">Chọn Xã/Phường</option>';

    if (province && district) {
        const wards = data[province].districts[district];
        for (let ward of wards) {
            wardSelect.innerHTML += `<option value="${ward}">${ward}</option>`;
        }
        wardSelect.disabled = false;
    } else {
        wardSelect.disabled = true;
    }
}
</script>

</body>
</html>
